workflows:
  android-sonarcloud-gradle:
    name: Andoid Sonarcloud gradle
    instance_type: linux_x2
    environment:
      vars:
        SONAR_PROJECT_KEY: wilmarmartinezq_Sonar
        SONAR_ORG_KEY: wilmarmartinezq
    triggering:
        events:
            - pull_request
        branch_patterns:
            - pattern: gradle-config
              include: true
              source: true    
    scripts:
      - |
        # Generate debug build
        ./gradlew assembleDebug        
      - |
        # Generate and upload code analysis report
        ./gradlew sonarqube
    artifacts:
      - app/build/outputs/**/*.apk
    publishing:
      email:
        recipients:
          - kevin@nevercode.io
